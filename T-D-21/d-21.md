## Project 01: 


## Project Overview:

#### The goal of this capstone project is to combine shell scripting with system monitoring and log management practices. You will create a set of automated tools using shell scripts to manage logs, monitor system performance using Prometheus and Node Exporter, and generate insights using PromQL queries. The project will require a systematic approach, covering scripting fundamentals, log management, and monitoring setup.

##### Project Deliverables:
Shell Scripts for Basic Operations:

#### Task: Write shell scripts to perform basic system operations, such as checking disk usage, memory usage, and CPU load.
Deliverable:

A collection of scripts that output system performance metrics.

Scripts should include error handling and logging.

Log Management Script:

#### Task: Develop a script to automate log management tasks such as log rotation and archiving. This script should include the ability to compress old logs and delete logs older than a specified number of days.
Deliverable:

A shell script that performs log rotation based on predefined conditions (e.g., log size, log age).

A report generated by the script detailing which logs were rotated, compressed, or deleted.

Advanced Shell Scripting - Loops, Conditions, Functions, and Error Handling:

#### Task: Refactor the previous scripts to include loops, conditionals, and functions for modularity. Implement error handling to manage potential issues during script execution.

Deliverable:

Modular shell scripts that use functions for repeatable tasks.

Error-handling mechanisms in place for scenarios like missing files, insufficient permissions, etc.

Logs that track script execution and any errors encountered.

Log Checking and Troubleshooting:

#### Task: Write a script that reads through system and application logs, identifies common issues (e.g., out of memory, failed service starts), and provides troubleshooting steps based on log analysis.

Deliverable:

A script that parses logs for errors or warnings and outputs possible root causes.
Documentation on the types of logs checked and the issues identified.

A troubleshooting guide based on common errors found in the logs.

Installation and Setup of Prometheus and Node Exporter:

### Task: Install and configure Prometheus and Node Exporter on the system. Ensure that Node Exporter is properly configured to collect system metrics.
Deliverable:
A documented installation and configuration process for Prometheus and Node Exporter.


## Installation and Setup

This section outlines the steps to download, install, and configure Prometheus and (optionally) Grafana on your system.

### Step 1: Download and Install Prometheus

1. **Download the latest version of Prometheus:**

   ```bash
   wget https://github.com/prometheus/prometheus/releases/download/v2.46.0/prometheus-2.46.0.linux-amd64.tar.gz


## commands 
tar -xvzf prometheus-2.46.0.linux-amd64.tar.gz

Move the binaries and create necessary directories:

cd prometheus-2.46.0.linux-amd64
sudo cp prometheus /usr/local/bin/
sudo cp promtool /usr/local/bin/
sudo mkdir /etc/prometheus
sudo cp -r consoles /etc/prometheus/
sudo cp -r console_libraries /etc/prometheus/
sudo cp prometheus.yml /etc/prometheus/
sudo mkdir -p /var/lib/prometheus/data
sudo mkdir -p /var/lib/prometheus/queries

1. Create the Prometheus user and assign permissions:

bash

    sudo useradd --no-create-home --shell /bin/false prometheus
    sudo chown -R prometheus:prometheus /usr/local/bin/prometheus
    sudo chown -R prometheus:prometheus /etc/prometheus
    sudo chown -R prometheus:prometheus /var/lib/prometheus

Step 2: Create a New Systemd Service File

    Create the service file:

sudo nano /etc/systemd/system/prometheus.service

Add the following content to the file:

ini

[Unit]

Description=Prometheus
Documentation=https://prometheus.io/docs/introduction/overview/
After=network.target

[Service]

User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \
  --config.file /etc/prometheus/prometheus.yml \
  --storage.tsdb.path /var/lib/prometheus/data \
  --query.active.query-log-file /var/lib/prometheus/queries/active.log

[Install]

WantedBy=multi-user.target

Reload the systemd daemon and start Prometheus:



    sudo systemctl daemon-reload
    sudo systemctl start prometheus
    sudo systemctl enable prometheus
    sudo systemctl status prometheus

Step 3: Verify Installation

    Access Prometheus:
        Open a web browser and navigate to http://localhost:9090 to check if Prometheus is running.

    Check Logs:

        If Prometheus fails to start, check the logs with:

        bash

        sudo journalctl -u prometheus -xe

Step 4: (Optional) Install Grafana

If you plan to use Grafana for advanced visualization of Prometheus metrics:

    Add the Grafana repository:

 

sudo apt-get install -y software-properties-common
sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"

Install Grafana:



sudo apt-get update
sudo apt-get install grafana

Start and enable Grafana:



sudo systemctl start grafana-server
sudo systemctl enable grafana-server

Access Grafana:

    Open http://localhost:3000 in your web browser.
    The default login credentials are admin/admin.

Screenshots:

![alt text](<images/Screenshot from 2024-08-08 17-20-55.png>)

![alt text](<images/Screenshot from 2024-08-08 18-39-45.png>)

![alt text](<images/Screenshot from 2024-08-08 18-40-02.png>)

![alt text](<images/Screenshot from 2024-08-08 18-41-48.png>)

![alt text](<images/Screenshot from 2024-08-12 16-10-09.png>)

![alt text](<images/Screenshot from 2024-08-12 16-10-14.png>)

![alt text](<images/Screenshot from 2024-08-08 18-39-45.png>)

![alt text](<images/Screenshot from 2024-08-12 16-21-12.png>)

![alt text](<images/Screenshot from 2024-08-12 16-24-55.png>)

![alt text](<images/Screenshot from 2024-08-12 16-32-57.png>)

![alt text](<images/Screenshot from 2024-08-12 16-47-17.png>)

![alt text](<images/Screenshot from 2024-08-12 16-49-00.png>)